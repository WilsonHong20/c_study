
############################################################################################################################
#gcc  fget.c -o fget -I.
############################################################################################################################
#CC=gcc                         ##编译器
#CFLAGS=-I.					   ##  -I. 参数告诉gcc从当前目录寻找头文件errors.h
#DEPS = errors.h                 ##告诉make   c文件依赖那些头文件，当头文件发生变化时，执行make会进行重编
#alarm:alarm.o 
#	$(CC) -o  alarm -g alarm.o
#fget:
#	$(CC) -o fget -g  fget.o

############################################################################################################################
##上面两行的综合写法
#-c标志表示产生目标文件    
#-o $@表示将输出文件命名为:左边的文件名
# $<表示依赖列表中的第一个项
#CC=gcc                         ##编译器
#CFLAGS=-I.					   ##  -I. 参数告诉gcc从当前目录寻找头文件errors.h
#DEPS = errors.h                 ##告诉make   c文件依赖那些头文件，当头文件发生变化时，执行make会进行重编
#%.O:%.c $(DEPS)
#	$(CC) -c -o $@ $< $(CFLAGS)                                   
#fget:fget.o
#	$(CC) -o fget fget.o
############################################################################################################################
# $@ $^分别表示:左边和右边
#CC=gcc                         ##编译器
#CFLAGS=-I.					   ##  -I. 参数告诉gcc从当前目录寻找头文件errors.h
#DEPS = errors.h                 ##告诉make   c文件依赖那些头文件，当头文件发生变化时，执行make会进行重编
#OBJ = fget.o 
#%.O:%.c $(DEPS)
#	$(CC) -c -o $@ $< $(CFLAGS)   
#fget:$(OBJ)
#	$(CC) -o $@ $^ $(CFLAGS)

############################################################################################################################
#  如果我们想把头文件，源文件和其他库文件分别放在不同的文件夹，那么makefile该怎么写呢？
#  另外，我们可以隐藏那些烦人的中间文件（目标文件）吗？当然可以！
#  
#  下面的makefile定义了include文件夹，lib文件夹路径，并且把目标文件放到src文件夹的子文件夹obj里面。
#  同时，还定义了一个宏，用于包含任何你想要包含的库，比如math库-lm。
#  这个makefile文件应该位于src目录，注意，这个makefile 还包含了一个规则用于清理source和obj文件夹，只需要输入make clean即可。
# .PHONY规则可以让make不去改动任何名为clean的文件（如果有的话）。  
############################################################################################################################
IDIR = ../include
CC = gcc
CFLAGS=-I$(IDIR)

ODIR=obj
LDIR= ../lib

LIBS=-lm

_DEPS=errors.h
DEPS=$(pathsubst %,$(IDIR)/%.$(_DEPS))

_OBJ= fget.o 
OBJ= $(pathsubst %,$(ODIR)/%,$(_OBJ))


$(ODIR)/%.o : %.c $(DEPS)
	$(CC) -c -o  $@  $< $(CFLAGS)

fget:$(OBJS)
	$(CC) -o $@ $< $(CFLAGS) $(LIBS)


.PHONY:clean
clean:
	rm -rf $(ODIR) /*.o  *~   core    $(INCDIR)     /*~   

##############################################################
#clean:
#	rm -rf alarm alarm.o  fget fget.o
